"use strict";(self.webpackChunkphynix_docs=self.webpackChunkphynix_docs||[]).push([[16],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),o=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=o(e.components);return r.createElement(l.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,c=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=o(a),u=n,m=h["".concat(l,".").concat(u)]||h[u]||p[u]||c;return a?r.createElement(m,i(i({ref:t},d),{},{components:a})):r.createElement(m,i({ref:t},d))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=a.length,i=new Array(c);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:n,i[1]=s;for(var o=2;o<c;o++)i[o]=a[o];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},2406:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>o});var r=a(7462),n=(a(7294),a(3905));const c={sidebar_position:4},i="Events",s={unversionedId:"characters/events",id:"characters/events",title:"Events",description:"Client-side",source:"@site/docs/characters/events.md",sourceDirName:"characters",slug:"/characters/events",permalink:"/docs/characters/events",draft:!1,editUrl:"https://github.com/distritic/phynix-docs/tree/main/docs/characters/events.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Attributes",permalink:"/docs/characters/class/attributes"},next:{title:"Exports",permalink:"/docs/characters/exports"}},l={},o=[{value:"Client-side",id:"client-side",level:2},{value:"core:setCharacter",id:"coresetcharacter",level:3},{value:"Server-side",id:"server-side",level:2},{value:"chars:getMenuData",id:"charsgetmenudata",level:3},{value:"chars:getCharacters",id:"charsgetcharacters",level:3},{value:"chars:loadAppearance",id:"charsloadappearance",level:3},{value:"core:characterLoaded",id:"corecharacterloaded",level:3},{value:"chars:hasSpawned",id:"charshasspawned",level:3}],d={toc:o},h="wrapper";function p(e){let{components:t,...a}=e;return(0,n.kt)(h,(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"events"},"Events"),(0,n.kt)("h2",{id:"client-side"},"Client-side"),(0,n.kt)("h3",{id:"coresetcharacter"},"core:setCharacter"),(0,n.kt)("p",null,"This event is triggered when the player character is initialised."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/main.lua"',title:'"client/main.lua"'},'AddEventHandler("core:setCharacter", function(charData)\n  print("Set character with data: "..json.encode(charData));\nend);\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/main.lua"',title:'"client/main.lua"'},'AddEventHandler("chars:loadedCharacterData", function(charData)\n  print("Loaded characters with data: "..json.encode(charData));\nend);\n')),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/main.lua"',title:'"client/main.lua"'},'AddEventHandler("chars:loadAppearance", function(character, jailTime, outfitName)\n  print("Loaded character appearance with data: "..json.encode(character), jailTime, outfitName);\nend);\n')),(0,n.kt)("h2",{id:"server-side"},"Server-side"),(0,n.kt)("h3",{id:"charsgetmenudata"},"chars:getMenuData"),(0,n.kt)("p",null,"This event is triggered when a player uses the ",(0,n.kt)("inlineCode",{parentName:"p"},"/swap")," command to switch characters, and at initial connection. The ",(0,n.kt)("inlineCode",{parentName:"p"},"src")," parameter is passed when triggered server-side."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'RegisterServerEvent("chars:getMenuData");\nAddEventHandler("chars:getMenuData", function(src)\n  print("Player Id "..src.." has entered the character selection menu.")\nend);\n')),(0,n.kt)("h3",{id:"charsgetcharacters"},"chars:getCharacters"),(0,n.kt)("p",null,"This event takes a callback function as the only argument, which will return the full list of characters. The example below prints the player ID and character name for each character currently instantiated."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'TriggerEvent("chars:getCharacters", function(characters)\n  for src, char in pairs(characters) do\n    print("Player Id: "..src);\n    print("Character Name: "..char.getName());\n  end\nend)\n')),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"You should use this event to return the table of characters rather than the export ",(0,n.kt)("a",{parentName:"p",href:"exports#getcharacters"},"GetCharacters"),". This is because exports have greater limitations to return value size in memory. If you have too many players connected, you may experience errors with using the export.")),(0,n.kt)("h3",{id:"charsloadappearance"},"chars:loadAppearance"),(0,n.kt)("p",null,"This event is used to load an outfit saved for a specific character in the ",(0,n.kt)("inlineCode",{parentName:"p"},"clothing")," table."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'TriggerEvent("chars:loadAppearance", function(outfitName)\n  print("Player Id "..source.." has loaded outfit "..outfitName);\nend);\n')),(0,n.kt)("h3",{id:"corecharacterloaded"},"core:characterLoaded"),(0,n.kt)("p",null,"This event is triggered when a character has been initialised (before picking a spawn location)."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'AddEventHandler("core:characterLoaded", function(src, char)\n  print("Player Id "..src.." has initialised character with Id "..char.get("id"));\nend);\n')),(0,n.kt)("h3",{id:"charshasspawned"},"chars:hasSpawned"),(0,n.kt)("p",null,"This event is triggered by the client when the character has spawned."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'RegisterServerEvent("chars:hasSpawned");\nAddEventHandler("chars:hasSpawned", function()\n  print("Player Id "..source.." has spawned.");\nend);\n')))}p.isMDXComponent=!0}}]);