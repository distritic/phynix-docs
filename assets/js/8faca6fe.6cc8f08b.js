"use strict";(self.webpackChunkphynix_docs=self.webpackChunkphynix_docs||[]).push([[9567],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>m});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),o=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},h=function(e){var t=o(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,s=e.parentName,h=i(e,["components","mdxType","originalType","parentName"]),u=o(a),d=n,m=u["".concat(s,".").concat(d)]||u[d]||p[d]||l;return a?r.createElement(m,c(c({ref:t},h),{},{components:a})):r.createElement(m,c({ref:t},h))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,c=new Array(l);c[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:n,c[1]=i;for(var o=2;o<l;o++)c[o]=a[o];return r.createElement.apply(null,c)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},9208:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>o});var r=a(7462),n=(a(7294),a(3905));const l={sidebar_position:5},c="Exports",i={unversionedId:"characters/exports",id:"characters/exports",title:"Exports",description:"Client-side",source:"@site/docs/characters/exports.md",sourceDirName:"characters",slug:"/characters/exports",permalink:"/docs/characters/exports",draft:!1,editUrl:"https://github.com/distritic/phynix-docs/tree/main/docs/characters/exports.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Events",permalink:"/docs/characters/events"},next:{title:"Events",permalink:"/docs/utils/events"}},s={},o=[{value:"Client-side",id:"client-side",level:2},{value:"IsInSelectionScreen",id:"isinselectionscreen",level:3},{value:"GetCharacterData",id:"getcharacterdata",level:3},{value:"GetCharacterField",id:"getcharacterfield",level:3},{value:"Server-side",id:"server-side",level:2},{value:"GetCharacter",id:"getcharacter",level:3},{value:"GetCharacterById",id:"getcharacterbyid",level:3},{value:"GetCharacters",id:"getcharacters",level:3},{value:"SaveAllCharacters",id:"saveallcharacters",level:3},{value:"SaveCurrentCharacter",id:"savecurrentcharacter",level:3},{value:"GetNumCharactersWithJob",id:"getnumcharacterswithjob",level:3},{value:"DoesCharacterHaveItem",id:"doescharacterhaveitem",level:3},{value:"DoesCharacterHaveLicense",id:"doescharacterhavelicense",level:3},{value:"GetCharacterField",id:"getcharacterfield-1",level:3},{value:"SetCharacterField",id:"setcharacterfield",level:3},{value:"InitializeCharacter",id:"initializecharacter",level:3},{value:"CreateNewCharacter",id:"createnewcharacter",level:3},{value:"DestroyCharacter",id:"destroycharacter",level:3},{value:"ValidateCharacterOwnership",id:"validatecharacterownership",level:3},{value:"DeleteCharacterById",id:"deletecharacterbyid",level:3}],h={toc:o},u="wrapper";function p(e){let{components:t,...a}=e;return(0,n.kt)(u,(0,r.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"exports"},"Exports"),(0,n.kt)("h2",{id:"client-side"},"Client-side"),(0,n.kt)("h3",{id:"isinselectionscreen"},"IsInSelectionScreen"),(0,n.kt)("p",null,"This function will return ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," if the player is currently selecting a character."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/main.lua"',title:'"client/main.lua"'},"local bool --[[bool]] = exports.px_chars:IsInSelectionScreen()\n")),(0,n.kt)("h3",{id:"getcharacterdata"},"GetCharacterData"),(0,n.kt)("p",null,"This function will return the ",(0,n.kt)("a",{parentName:"p",href:"class/attributes"},"data attributes")," of the current character."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/main.lua"',title:'"client/main.lua"'},"local data --[[table]] = exports.px_chars:GetCharacterData()\n")),(0,n.kt)("h3",{id:"getcharacterfield"},"GetCharacterField"),(0,n.kt)("p",null,"This function will return the ",(0,n.kt)("a",{parentName:"p",href:"class/attributes"},"data attribute")," of the current character corresponding to the ",(0,n.kt)("inlineCode",{parentName:"p"},"field")," provided."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="client/main.lua"',title:'"client/main.lua"'},'local data --[[any]] = exports.px_chars:GetCharacterField(key --[[string]])\n-- key: the field name to retrieve (e.g. "playTime")\n')),(0,n.kt)("h2",{id:"server-side"},"Server-side"),(0,n.kt)("h3",{id:"getcharacter"},"GetCharacter"),(0,n.kt)("p",null,"This function is used to fetch a character by player ID."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"local char --[[table]] = exports.px_chars:GetCharacter(src --[[int]]);\n-- src: the player ID to get the character of\n")),(0,n.kt)("h3",{id:"getcharacterbyid"},"GetCharacterById"),(0,n.kt)("p",null,"This function is used to fetch a character by character ID."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"local char --[[table]] = exports.px_chars:GetCharacter(charId --[[int]]);\n-- src: the character ID to get the character of\n")),(0,n.kt)("h3",{id:"getcharacters"},"GetCharacters"),(0,n.kt)("p",null,"This function is used to fetch a table of all characters initialised."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'local chars --[[table]] = exports.px_chars:GetCharacters();\nfor src, char in pairs(chars) do\n  print("Player Id: "..src);\n  print("Character Name: "..char.getName());\nend\n')),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"You should use the event ",(0,n.kt)("a",{parentName:"p",href:"events#charsgetcharacters"},"chars:getCharacters")," to return the table of characters rather than this export. This is because exports have greater limitations to return value size in memory. If you have too many players connected, you may experience errors with using the export.")),(0,n.kt)("h3",{id:"saveallcharacters"},"SaveAllCharacters"),(0,n.kt)("p",null,"This function is used to save any updates character fields of all characters to the database."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"exports.px_chars:SaveAllCharacters();\n")),(0,n.kt)("h3",{id:"savecurrentcharacter"},"SaveCurrentCharacter"),(0,n.kt)("p",null,"This function is used to save any updated character fields by the player ID of the character to the database."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"exports.px_chars:SaveCurrentCharacter(src --[[int]])\n-- src: player ID of character to save\n")),(0,n.kt)("h3",{id:"getnumcharacterswithjob"},"GetNumCharactersWithJob"),(0,n.kt)("p",null,"This function is used to return the total number of characters with a specific job."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"local numCharactersWithJob --[[int]] = exports.px_chars:GetNumCharactersWithJob(job --[[string]]);\n-- job: the specific job to count\n")),(0,n.kt)("h3",{id:"doescharacterhaveitem"},"DoesCharacterHaveItem"),(0,n.kt)("p",null,"This function is used to return whether a character has an item."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"local hasItem --[[bool]] = exports.px_chars:DoesCharacterHaveItem(src --[[int]], item --[[string/table]]);\n-- src: the player ID of the character to check\n-- item: the item to check for\n")),(0,n.kt)("h3",{id:"doescharacterhavelicense"},"DoesCharacterHaveLicense"),(0,n.kt)("p",null,"This function is used to return whether a character has a license. If the character does have the license, license data will be returned. This still evaluates to ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," in an ",(0,n.kt)("inlineCode",{parentName:"p"},"if ... then")," statement."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'local hasLicense --[[table/bool]] = exports.px_chars:DoesCharacterHaveLicense(src --[[int]], licenseName --[[string]]);\n-- src: the player ID of the character to check\n-- licenseName: the license name to check for, e.g. "driver"\n')),(0,n.kt)("h3",{id:"getcharacterfield-1"},"GetCharacterField"),(0,n.kt)("p",null,"This function is used to return a specific field of a character. This is useful when the character object is only required to fetch a single value, as it is quicker."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"local charField --[[any]] = exports.px_chars:GetCharacterField(src --[[int]], key --[[string]]);\n-- src: the player ID to get the character field of\n-- key: the field key used to return the field value\n")),(0,n.kt)("p",null,"For example, this call will check the job of a character using the ",(0,n.kt)("inlineCode",{parentName:"p"},"GetCharacterField")," export."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'-- Faster Method\nRegisterServerEvent("tow:isJobTow")\nAddEventHandler("tow:isJobTow", function()\n  local job = exports.px_chars:GetCharacterField(source, "job");\n  TriggerClientEvent("tow:currentJob", job == "tow");\nend);\n\n-- Slower Method\nRegisterServerEvent("tow:isJobTow")\nAddEventHandler("tow:isJobTow", function()\n  local char = exports.px_chars:GetCharacter(source);\n  local job = char.get("job");\n  TriggerClientEvent("tow:currentJob", job == "tow");\nend);\n')),(0,n.kt)("h3",{id:"setcharacterfield"},"SetCharacterField"),(0,n.kt)("p",null,"This function is used to set a specific character field. This is useful when the character object is only required to set a single value, as it is quicker."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"exports.px_chars:SetCharacterField(src --[[int]], key --[[string]], value --[[any]]);\n-- src: the player ID to set the character field of\n-- key: the key of the field value\n-- value: the new field value\n")),(0,n.kt)("p",null,"For example, this call will set the job of a character using the ",(0,n.kt)("inlineCode",{parentName:"p"},"SetCharacterField")," export."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'-- Faster Method\nRegisterServerEvent("tow:setOnDuty")\nAddEventHandler("tow:setOnDuty", function()\n  exports.px_chars:SetCharacterField(source, "job", "tow");\n  TriggerClientEvent("core:notify", source, "Your job is now tow");\nend);\n\n-- Slower Method\nRegisterServerEvent("tow:setOnDuty")\nAddEventHandler("tow:setOnDuty", function()\n  local char = exports.px_chars:GetCharacter(source);\n  char.set("job", "tow");\n  TriggerClientEvent("core:notify", source, "Your job is now tow");\nend);\n')),(0,n.kt)("h3",{id:"initializecharacter"},"InitializeCharacter"),(0,n.kt)("p",null,"This function is used by the character selection interface to initialise a character."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"exports.px_chars:InitializeCharacter(src --[[int]], charId --[[int]]);\n-- src: the player ID to initialise the character on\n-- charId: the character ID of character to initialise\n")),(0,n.kt)("h3",{id:"createnewcharacter"},"CreateNewCharacter"),(0,n.kt)("p",null,"This function is used by the character selection interface to create a new character."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},'local data = {\n  ["name"] = {\n    ["first"] = "Miles",\n    ["middle"] = "",\n    ["last"] = "Blaine"\n  },\n  ["dateOfBirth"] = "1987-05-12",\n  ["gender"] = "m"\n}\nexports.px_chars:CreateNewCharacter(src --[[int]], data --[[table]])\n-- src: player ID of character owner\n-- data: base information about the character\n')),(0,n.kt)("h3",{id:"destroycharacter"},"DestroyCharacter"),(0,n.kt)("p",null,"This function is used to destroy a character object by player ID, simultaniously saving it."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"exports.px_chars:DestroyCharacter(src --[[int]], cb --[[function]]);\n-- src: the player ID to destroy the character of\n-- cb?: a callback function after completion\n")),(0,n.kt)("h3",{id:"validatecharacterownership"},"ValidateCharacterOwnership"),(0,n.kt)("p",null,"This function will return ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," if the player has ownership of a character, otherwise ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"exports.px_chars:ValidateCharacterOwnership(src --[[int]], charId --[[int]]);\n-- src: the player ID to compare with\n-- charId: the character ID to compare with\n")),(0,n.kt)("h3",{id:"deletecharacterbyid"},"DeleteCharacterById"),(0,n.kt)("p",null,"This function will delete the character by their character ID, with a callback function after completion."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:'title="server/main.lua"',title:'"server/main.lua"'},"exports.px_chars:DeleteCharacterById(charId --[[int]], cb --[[function]]);\n-- charId: the character ID of character to be deleted\n-- cb: a callback function after completion\n")))}p.isMDXComponent=!0}}]);